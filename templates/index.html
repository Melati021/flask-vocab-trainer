<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>马腾宇抗遗忘复习</title>
    <style>
        body { font-family: sans-serif; padding: 2em; background: #f6f6f6; }
        h2 { margin-top: 2em; }
        form { margin-bottom: 1em; }
        .word-box { padding: 1em; margin: 1em 0; background: white; border-radius: 5px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
        .stats { margin-top: 2em; padding: 1em; background: #fffbe6; border: 1px solid #ffd666; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>📘 🦉抗遗忘复习🦉</h1>

    {% if message %}<p><strong>{{ message }}</strong></p>{% endif %}

    <h2>➕ 添加新单词</h2>
    <form method="POST">
        <input type="text" name="new_word" placeholder="英文" required>
        <input type="text" name="meaning" placeholder="中文释义" required>
        <button type="submit">添加</button>
    </form>

    <h2>🕐 待复习单词</h2>
    {% if review_words %}
        {% for word, info in review_words %}
        <div class="word-box">
            <form method="POST">
                <strong>{{ word }}</strong> - {{ info.meaning }}<br>
                （记录于 {{ info.start_date }}）<br>
                <input type="radio" name="action_{{ word }}" value="yes" required> 记住
                <input type="radio" name="action_{{ word }}" value="no"> 没记住
                <button type="submit" name="review_action" value="{{ word }}">提交</button>
            </form>
            <!-- 删除按钮 -->
            <form method="POST" style="display:inline;">
                <input type="hidden" name="delete_word" value="{{ word }}">
                <button type="submit" onclick="return confirm('确定要删除 {{ word }} 吗？')">❌ 删除</button>
            </form>
        </div>
        {% endfor %}
    {% else %}
        <p>🎉 今天没有需要复习的单词！</p>
    {% endif %}

    <h2>📉 错误总结
        <form method="POST" style="display:inline;">
            <button type="submit" name="export_errors">📤 导出错词</button>
        </form>
    </h2>
    {% if errors %}
        <ul>
        {% for word, info in errors %}
            <li>{{ word }} - {{ info.meaning }}（记录于 {{ info.start_date }}）</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>暂无错误记录。</p>
    {% endif %}

    <div class="stats">
        <strong>复习进度：</strong><br>
        总词数：{{ stats.total }}，
        已完成：{{ stats.completed }}，
        错词：{{ stats.errors }}，
        待复习：{{ stats.pending }}
    </div>
</body>
</html>

